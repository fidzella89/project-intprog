{"ast":null,"code":"import { first } from 'rxjs/operators';\nimport { Role } from '@app/_models';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@app/_services\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction ListComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"All Requests\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction ListComponent_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"Employee Requests\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction ListComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"a\", 21);\n    i0.ɵɵtext(2, \"View All Requests\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ListComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵelement(1, \"span\", 23);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" No requests found for Employee #\", ctx_r4.employeeId, \" \");\n  }\n}\nfunction ListComponent_table_10_tr_16_ng_container_6_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 38);\n    i0.ɵɵtext(1, \" No items \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListComponent_table_10_tr_16_ng_container_6_div_2_ng_container_1_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 44);\n    i0.ɵɵlistener(\"click\", function ListComponent_table_10_tr_16_ng_container_6_div_2_ng_container_1_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const request_r9 = i0.ɵɵnextContext(4).$implicit;\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r18.toggleExpand(request_r9.id));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const request_r9 = i0.ɵɵnextContext(4).$implicit;\n    const ctx_r17 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r17.getToggleText(request_r9), \" \");\n  }\n}\nfunction ListComponent_table_10_tr_16_ng_container_6_div_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 41)(2, \"span\", 42);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, ListComponent_table_10_tr_16_ng_container_6_div_2_ng_container_1_button_4_Template, 2, 1, \"button\", 43);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const request_r9 = i0.ɵɵnextContext(3).$implicit;\n    const ctx_r15 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r15.getVisibleItems(request_r9).slice(0, ctx_r15.itemsPerRow).join(\", \"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r15.hasMoreItems(request_r9));\n  }\n}\nfunction ListComponent_table_10_tr_16_ng_container_6_div_2_ng_container_2_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 48);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r24 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r24, \" \");\n  }\n}\nfunction ListComponent_table_10_tr_16_ng_container_6_div_2_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 45);\n    i0.ɵɵtemplate(2, ListComponent_table_10_tr_16_ng_container_6_div_2_ng_container_2_div_2_Template, 2, 1, \"div\", 46);\n    i0.ɵɵelementStart(3, \"button\", 47);\n    i0.ɵɵlistener(\"click\", function ListComponent_table_10_tr_16_ng_container_6_div_2_ng_container_2_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const request_r9 = i0.ɵɵnextContext(3).$implicit;\n      const ctx_r25 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r25.toggleExpand(request_r9.id));\n    });\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const request_r9 = i0.ɵɵnextContext(3).$implicit;\n    const ctx_r16 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r16.getVisibleItems(request_r9));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r16.getToggleText(request_r9), \" \");\n  }\n}\nfunction ListComponent_table_10_tr_16_ng_container_6_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtemplate(1, ListComponent_table_10_tr_16_ng_container_6_div_2_ng_container_1_Template, 5, 2, \"ng-container\", 4);\n    i0.ɵɵtemplate(2, ListComponent_table_10_tr_16_ng_container_6_div_2_ng_container_2_Template, 5, 2, \"ng-container\", 4);\n    i0.ɵɵelementStart(3, \"small\", 40);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const request_r9 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r14 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"title\", ctx_r14.getItemsTooltip(request_r9));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r14.isExpanded(request_r9.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r14.isExpanded(request_r9.id));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", (request_r9.items == null ? null : request_r9.items.length) === 0 ? \"No items\" : (request_r9.items == null ? null : request_r9.items.length) === 1 ? \"1 Item\" : (request_r9.items == null ? null : request_r9.items.length) + \" Items\", \" \");\n  }\n}\nfunction ListComponent_table_10_tr_16_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ListComponent_table_10_tr_16_ng_container_6_div_1_Template, 2, 0, \"div\", 33);\n    i0.ɵɵtemplate(2, ListComponent_table_10_tr_16_ng_container_6_div_2_Template, 5, 4, \"div\", 37);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const request_r9 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(request_r9.items == null ? null : request_r9.items.length));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", request_r9.items == null ? null : request_r9.items.length);\n  }\n}\nfunction ListComponent_table_10_tr_16_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 38);\n    i0.ɵɵtext(1, \"N/A\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListComponent_table_10_tr_16_ng_container_17_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 55);\n  }\n}\nfunction ListComponent_table_10_tr_16_ng_container_17_span_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 55);\n  }\n}\nfunction ListComponent_table_10_tr_16_ng_container_17_span_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Delete\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListComponent_table_10_tr_16_ng_container_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"a\", 49);\n    i0.ɵɵtext(2, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 50)(4, \"button\", 51);\n    i0.ɵɵtemplate(5, ListComponent_table_10_tr_16_ng_container_17_span_5_Template, 1, 0, \"span\", 20);\n    i0.ɵɵtext(6, \" Status \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"ul\", 52)(8, \"li\")(9, \"a\", 53);\n    i0.ɵɵlistener(\"click\", function ListComponent_table_10_tr_16_ng_container_17_Template_a_click_9_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const request_r9 = i0.ɵɵnextContext().$implicit;\n      const ctx_r34 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r34.changeStatus(request_r9.id, \"Pending\"));\n    });\n    i0.ɵɵtext(10, \"Pending\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"li\")(12, \"a\", 53);\n    i0.ɵɵlistener(\"click\", function ListComponent_table_10_tr_16_ng_container_17_Template_a_click_12_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const request_r9 = i0.ɵɵnextContext().$implicit;\n      const ctx_r37 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r37.changeStatus(request_r9.id, \"Approved\"));\n    });\n    i0.ɵɵtext(13, \"Approved\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"li\")(15, \"a\", 53);\n    i0.ɵɵlistener(\"click\", function ListComponent_table_10_tr_16_ng_container_17_Template_a_click_15_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const request_r9 = i0.ɵɵnextContext().$implicit;\n      const ctx_r39 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r39.changeStatus(request_r9.id, \"Rejected\"));\n    });\n    i0.ɵɵtext(16, \"Rejected\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(17, \"button\", 54);\n    i0.ɵɵlistener(\"click\", function ListComponent_table_10_tr_16_ng_container_17_Template_button_click_17_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const request_r9 = i0.ɵɵnextContext().$implicit;\n      const ctx_r41 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r41.openDeleteModal(request_r9));\n    });\n    i0.ɵɵtemplate(18, ListComponent_table_10_tr_16_ng_container_17_span_18_Template, 1, 0, \"span\", 20);\n    i0.ɵɵtemplate(19, ListComponent_table_10_tr_16_ng_container_17_span_19_Template, 2, 0, \"span\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const request_r9 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"edit/\", request_r9.id, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", request_r9.isUpdating);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", request_r9.isUpdating);\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"disabled\", request_r9.status === \"Pending\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassProp(\"disabled\", request_r9.status === \"Approved\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassProp(\"disabled\", request_r9.status === \"Rejected\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", request_r9.isDeleting);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", request_r9.isDeleting);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !request_r9.isDeleting);\n  }\n}\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"bg-secondary\": a0,\n    \"bg-success\": a1,\n    \"bg-danger\": a2\n  };\n};\nfunction ListComponent_table_10_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 32);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 32);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 32);\n    i0.ɵɵtemplate(6, ListComponent_table_10_tr_16_ng_container_6_Template, 3, 2, \"ng-container\", 4);\n    i0.ɵɵtemplate(7, ListComponent_table_10_tr_16_span_7_Template, 2, 0, \"span\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 32)(9, \"span\", 34);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"td\", 32);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"td\", 35)(15, \"a\", 36);\n    i0.ɵɵtext(16, \"View\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(17, ListComponent_table_10_tr_16_ng_container_17_Template, 20, 12, \"ng-container\", 4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const request_r9 = ctx.$implicit;\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(request_r9.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(request_r9.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", request_r9.type !== \"Leave\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", request_r9.type === \"Leave\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(12, _c0, request_r9.status === \"Pending\", request_r9.status === \"Approved\", request_r9.status === \"Rejected\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(request_r9.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(13, 9, request_r9.createdDate, \"medium\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"view/\", request_r9.id, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.isAdmin);\n  }\n}\nfunction ListComponent_table_10_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 56)(2, \"span\", 38);\n    i0.ɵɵtext(3, \"No requests found\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ListComponent_table_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 25)(1, \"thead\")(2, \"tr\")(3, \"th\", 26);\n    i0.ɵɵtext(4, \"Request #\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\", 27);\n    i0.ɵɵtext(6, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 28);\n    i0.ɵɵtext(8, \"Items\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\", 27);\n    i0.ɵɵtext(10, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\", 29);\n    i0.ɵɵtext(12, \"Created\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\", 30);\n    i0.ɵɵtext(14, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"tbody\");\n    i0.ɵɵtemplate(16, ListComponent_table_10_tr_16_Template, 18, 16, \"tr\", 31);\n    i0.ɵɵtemplate(17, ListComponent_table_10_tr_17_Template, 4, 0, \"tr\", 4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.requests);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r5.loading && !ctx_r5.notFound && (ctx_r5.requests == null ? null : ctx_r5.requests.length) === 0);\n  }\n}\nfunction ListComponent_span_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 55);\n  }\n}\nexport let ListComponent = /*#__PURE__*/(() => {\n  class ListComponent {\n    constructor(requestService, alertService, accountService, route) {\n      var _a;\n      this.requestService = requestService;\n      this.alertService = alertService;\n      this.accountService = accountService;\n      this.route = route;\n      this.requests = [];\n      this.loading = false;\n      this.isAdmin = false;\n      this.selectedRequest = null;\n      this.isDeleting = false;\n      this.expandedItems = {}; // Track expanded state for each request\n      this.itemsPerRow = 2; // Number of items to show initially\n      this.employeeId = null;\n      this.notFound = false;\n      this.isAdmin = ((_a = this.accountService.accountValue) === null || _a === void 0 ? void 0 : _a.role) === Role.Admin;\n      // Get employeeId from query params\n      this.route.queryParams.subscribe(params => {\n        this.employeeId = params['employeeId'];\n        if (this.employeeId) {\n          this.loadRequests();\n        } else {\n          this.notFound = false;\n          this.loadRequests();\n        }\n      });\n    }\n    ngOnInit() {\n      this.loadRequests();\n      this.deleteModal = new bootstrap.Modal(document.getElementById('deleteModal'));\n    }\n    loadRequests() {\n      this.loading = true;\n      this.notFound = false;\n      if (this.employeeId) {\n        // Load requests for specific employee\n        this.requestService.getByEmployeeId(this.employeeId).pipe(first()).subscribe({\n          next: requests => {\n            this.requests = requests || [];\n            this.notFound = !requests || requests.length === 0;\n            this.loading = false;\n          },\n          error: error => {\n            this.alertService.error(error);\n            this.loading = false;\n          }\n        });\n      } else {\n        // Load all requests\n        this.requestService.getAll().pipe(first()).subscribe({\n          next: requests => {\n            this.requests = requests;\n            this.loading = false;\n          },\n          error: error => {\n            this.alertService.error(error);\n            this.loading = false;\n          }\n        });\n      }\n    }\n    // Get visible items for a request\n    getVisibleItems(request) {\n      if (!request.items || request.items.length === 0) return [];\n      const items = request.items;\n      const isExpanded = this.expandedItems[request.id];\n      const visibleCount = isExpanded ? items.length : this.itemsPerRow;\n      return items.slice(0, visibleCount).map(item => `${item.name} (${item.quantity})`);\n    }\n    // Get items as single line for tooltip\n    getItemsTooltip(request) {\n      if (!request.items || request.items.length === 0) return '';\n      return request.items.map(item => `${item.name} (${item.quantity})`).join(', ');\n    }\n    // Check if request is expanded\n    isExpanded(requestId) {\n      return this.expandedItems[requestId] === true;\n    }\n    // Get remaining items count\n    getRemainingCount(request) {\n      if (!request.items) return 0;\n      return Math.max(0, request.items.length - this.itemsPerRow);\n    }\n    // Toggle expanded state\n    toggleExpand(requestId) {\n      // Reset all other expanded states\n      Object.keys(this.expandedItems).forEach(key => {\n        if (key !== requestId) {\n          this.expandedItems[key] = false;\n        }\n      });\n      // Toggle current request's expanded state\n      this.expandedItems[requestId] = !this.expandedItems[requestId];\n    }\n    // Check if request has more items\n    hasMoreItems(request) {\n      return request.items && request.items.length > this.itemsPerRow;\n    }\n    // Get the text for see more/less button\n    getToggleText(request) {\n      if (!this.hasMoreItems(request)) return '';\n      const remaining = this.getRemainingCount(request);\n      return this.expandedItems[request.id] ? 'See Less' : `See ${remaining} more`;\n    }\n    changeStatus(id, newStatus) {\n      const request = this.requests.find(x => x.id === id);\n      if (!request) return;\n      request.isUpdating = true;\n      this.requestService.changeStatus(id, newStatus, `Status changed to ${newStatus} by admin`).pipe(first()).subscribe({\n        next: () => {\n          var _a;\n          request.status = newStatus;\n          // Update workflow status if it exists\n          if (((_a = request.workflows) === null || _a === void 0 ? void 0 : _a.length) > 0) {\n            request.workflows[0].status = newStatus;\n          }\n          request.isUpdating = false;\n          this.alertService.success('Status updated successfully');\n        },\n        error: error => {\n          this.alertService.error(error);\n          request.isUpdating = false;\n        }\n      });\n    }\n    openDeleteModal(request) {\n      this.selectedRequest = request;\n      this.deleteModal.show();\n    }\n    confirmDelete() {\n      if (!this.selectedRequest) return;\n      this.isDeleting = true;\n      this.requestService.delete(this.selectedRequest.id).pipe(first()).subscribe({\n        next: () => {\n          this.deleteModal.hide();\n          this.alertService.success('Request deleted successfully', {\n            keepAfterRouteChange: true\n          });\n          this.requests = this.requests.filter(x => x.id !== this.selectedRequest.id);\n          this.isDeleting = false;\n          this.selectedRequest = null;\n        },\n        error: error => {\n          this.alertService.error(error);\n          this.isDeleting = false;\n        }\n      });\n    }\n  }\n  ListComponent.ɵfac = function ListComponent_Factory(t) {\n    return new (t || ListComponent)(i0.ɵɵdirectiveInject(i1.RequestService), i0.ɵɵdirectiveInject(i1.AlertService), i0.ɵɵdirectiveInject(i1.AccountService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n  ListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ListComponent,\n    selectors: [[\"ng-component\"]],\n    decls: 32,\n    vars: 9,\n    consts: [[1, \"card\"], [1, \"card-header\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"mb-0\"], [4, \"ngIf\"], [1, \"card-body\"], [\"class\", \"text-center\", 4, \"ngIf\"], [\"class\", \"alert alert-warning\", 4, \"ngIf\"], [\"class\", \"table table-striped\", 4, \"ngIf\"], [\"id\", \"deleteModal\", \"tabindex\", \"-1\", \"aria-labelledby\", \"deleteModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\", \"bg-danger\", \"text-white\"], [\"id\", \"deleteModalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\", \"btn-close-white\"], [1, \"modal-body\"], [1, \"mb-0\", \"text-danger\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", 3, \"disabled\", \"click\"], [\"class\", \"spinner-border spinner-border-sm me-1\", 4, \"ngIf\"], [\"routerLink\", \"/requests\", 1, \"btn\", \"btn-secondary\"], [1, \"text-center\"], [1, \"spinner-border\", \"spinner-border-lg\", \"align-center\"], [1, \"alert\", \"alert-warning\"], [1, \"table\", \"table-striped\"], [1, \"text-center\", 2, \"width\", \"12%\"], [1, \"text-center\", 2, \"width\", \"10%\"], [1, \"text-center\", 2, \"width\", \"20%\"], [1, \"text-center\", 2, \"width\", \"18%\"], [1, \"text-center\", 2, \"width\", \"15%\"], [4, \"ngFor\", \"ngForOf\"], [1, \"text-center\", \"align-middle\"], [\"class\", \"text-muted\", 4, \"ngIf\"], [1, \"badge\", 3, \"ngClass\"], [1, \"text-center\", \"align-middle\", 2, \"white-space\", \"nowrap\"], [1, \"btn\", \"btn-sm\", \"btn-primary\", \"me-1\", 3, \"routerLink\"], [3, \"title\", 4, \"ngIf\"], [1, \"text-muted\"], [3, \"title\"], [1, \"text-muted\", \"d-block\"], [1, \"d-flex\", \"align-items-center\"], [1, \"text-truncate\"], [\"class\", \"btn btn-link btn-sm p-0 ms-1\", 3, \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-link\", \"btn-sm\", \"p-0\", \"ms-1\", 3, \"click\"], [1, \"items-list\"], [\"class\", \"item-line\", 4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-link\", \"btn-sm\", \"p-0\", 3, \"click\"], [1, \"item-line\"], [1, \"btn\", \"btn-sm\", \"btn-warning\", \"me-1\", 3, \"routerLink\"], [1, \"btn-group\", \"me-1\"], [\"type\", \"button\", \"data-bs-toggle\", \"dropdown\", 1, \"btn\", \"btn-sm\", \"btn-info\", \"dropdown-toggle\", 3, \"disabled\"], [1, \"dropdown-menu\"], [1, \"dropdown-item\", 3, \"click\"], [1, \"btn\", \"btn-sm\", \"btn-danger\", 3, \"disabled\", \"click\"], [1, \"spinner-border\", \"spinner-border-sm\", \"me-1\"], [\"colspan\", \"7\", 1, \"text-center\"]],\n    template: function ListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h2\", 3);\n        i0.ɵɵtemplate(4, ListComponent_ng_container_4_Template, 2, 0, \"ng-container\", 4);\n        i0.ɵɵtemplate(5, ListComponent_ng_container_5_Template, 2, 0, \"ng-container\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(6, ListComponent_div_6_Template, 3, 0, \"div\", 4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 5);\n        i0.ɵɵtemplate(8, ListComponent_div_8_Template, 2, 0, \"div\", 6);\n        i0.ɵɵtemplate(9, ListComponent_div_9_Template, 2, 1, \"div\", 7);\n        i0.ɵɵtemplate(10, ListComponent_table_10_Template, 18, 2, \"table\", 8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"div\", 9)(12, \"div\", 10)(13, \"div\", 11)(14, \"div\", 12)(15, \"h5\", 13);\n        i0.ɵɵtext(16, \"Confirm Delete\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"button\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 15)(19, \"p\");\n        i0.ɵɵtext(20, \"Are you sure you want to delete request \");\n        i0.ɵɵelementStart(21, \"strong\");\n        i0.ɵɵtext(22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(23, \"?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"p\", 16);\n        i0.ɵɵtext(25, \"This action cannot be undone.\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"div\", 17)(27, \"button\", 18);\n        i0.ɵɵtext(28, \"Cancel\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"button\", 19);\n        i0.ɵɵlistener(\"click\", function ListComponent_Template_button_click_29_listener() {\n          return ctx.confirmDelete();\n        });\n        i0.ɵɵtemplate(30, ListComponent_span_30_Template, 1, 0, \"span\", 20);\n        i0.ɵɵtext(31, \" Delete Request \");\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", !ctx.employeeId);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.employeeId);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.employeeId);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.notFound);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.notFound && ctx.requests.length > 0);\n        i0.ɵɵadvance(12);\n        i0.ɵɵtextInterpolate1(\"#\", ctx.selectedRequest == null ? null : ctx.selectedRequest.requestNumber, \"\");\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"disabled\", ctx.isDeleting);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isDeleting);\n      }\n    },\n    dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i2.RouterLink, i3.DatePipe],\n    styles: [\".btn-link.btn-sm[_ngcontent-%COMP%] {\\n        text-decoration: none;\\n        color: #0d6efd;\\n        font-size: 0.875rem;\\n        font-weight: 500;\\n    }\\n    .btn-link.btn-sm[_ngcontent-%COMP%]:hover {\\n        text-decoration: underline;\\n    }\\n    .text-truncate[_ngcontent-%COMP%] {\\n        max-width: 100%;\\n        display: inline-block;\\n    }\\n    td[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%] {\\n        gap: 0.25rem;\\n    }\\n    .items-list[_ngcontent-%COMP%] {\\n        margin-bottom: 0.25rem;\\n    }\\n    .item-line[_ngcontent-%COMP%] {\\n        line-height: 1.4;\\n    }\\n    .item-line[_ngcontent-%COMP%]:not(:last-child) {\\n        margin-bottom: 0.125rem;\\n    }\"]\n  });\n  return ListComponent;\n})();","map":{"version":3,"mappings":"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","names":["first","Role","i0","ListComponent","constructor","requestService","alertService","accountService","route","isAdmin","accountValue","role","Admin","queryParams","subscribe","params","employeeId","loadRequests","notFound","ngOnInit","deleteModal","bootstrap","Modal","document","getElementById","loading","getByEmployeeId","pipe","next","requests","length","error","getAll","getVisibleItems","request","items","isExpanded","expandedItems","id","visibleCount","itemsPerRow","slice","map","item","name","quantity","getItemsTooltip","join","requestId","getRemainingCount","Math","max","toggleExpand","Object","keys","forEach","key","hasMoreItems","getToggleText","remaining","changeStatus","newStatus","find","x","isUpdating","status","workflows","success","openDeleteModal","selectedRequest","show","confirmDelete","isDeleting","delete","hide","keepAfterRouteChange","filter","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\JiM\\School\\3rd Year\\2nd Semester\\SUBJECTS\\IT-INTPROG32\\Coding (INTPROG32)\\Final\\project6\\frontend\\src\\app\\requests\\list.component.ts","D:\\JiM\\School\\3rd Year\\2nd Semester\\SUBJECTS\\IT-INTPROG32\\Coding (INTPROG32)\\Final\\project6\\frontend\\src\\app\\requests\\list.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { first } from 'rxjs/operators';\nimport { RequestService, AlertService, AccountService } from '@app/_services';\nimport { Role } from '@app/_models';\ndeclare var bootstrap: any;\n\n@Component({ templateUrl: 'list.component.html' })\nexport class ListComponent implements OnInit {\n    requests: any[] = [];\n    loading = false;\n    isAdmin = false;\n    selectedRequest: any = null;\n    deleteModal: any;\n    isDeleting = false;\n    expandedItems: { [key: string]: boolean } = {}; // Track expanded state for each request\n    itemsPerRow = 2; // Number of items to show initially\n    employeeId: string | null = null;\n    notFound = false;\n\n    constructor(\n        private requestService: RequestService,\n        private alertService: AlertService,\n        private accountService: AccountService,\n        private route: ActivatedRoute\n    ) {\n        this.isAdmin = this.accountService.accountValue?.role === Role.Admin;\n        \n        // Get employeeId from query params\n        this.route.queryParams.subscribe(params => {\n            this.employeeId = params['employeeId'];\n            if (this.employeeId) {\n                this.loadRequests();\n            } else {\n                this.notFound = false;\n                this.loadRequests();\n            }\n        });\n    }\n\n    ngOnInit() {\n        this.loadRequests();\n        this.deleteModal = new bootstrap.Modal(document.getElementById('deleteModal'));\n    }\n\n    private loadRequests() {\n        this.loading = true;\n        this.notFound = false;\n        if (this.employeeId) {\n            // Load requests for specific employee\n            this.requestService.getByEmployeeId(this.employeeId)\n                .pipe(first())\n                .subscribe({\n                    next: (requests: any) => {\n                        this.requests = requests || [];\n                        this.notFound = !requests || requests.length === 0;\n                        this.loading = false;\n                    },\n                    error: error => {\n                        this.alertService.error(error);\n                        this.loading = false;\n                    }\n                });\n        } else {\n            // Load all requests\n            this.requestService.getAll()\n                .pipe(first())\n                .subscribe({\n                    next: (requests: any) => {\n                        this.requests = requests;\n                        this.loading = false;\n                    },\n                    error: error => {\n                        this.alertService.error(error);\n                        this.loading = false;\n                    }\n                });\n        }\n    }\n\n    // Get visible items for a request\n    getVisibleItems(request: any): string[] {\n        if (!request.items || request.items.length === 0) return [];\n        \n        const items = request.items;\n        const isExpanded = this.expandedItems[request.id];\n        const visibleCount = isExpanded ? items.length : this.itemsPerRow;\n        \n        return items\n            .slice(0, visibleCount)\n            .map(item => `${item.name} (${item.quantity})`);\n    }\n\n    // Get items as single line for tooltip\n    getItemsTooltip(request: any): string {\n        if (!request.items || request.items.length === 0) return '';\n        return request.items\n            .map(item => `${item.name} (${item.quantity})`)\n            .join(', ');\n    }\n\n    // Check if request is expanded\n    isExpanded(requestId: string): boolean {\n        return this.expandedItems[requestId] === true;\n    }\n\n    // Get remaining items count\n    getRemainingCount(request: any): number {\n        if (!request.items) return 0;\n        return Math.max(0, request.items.length - this.itemsPerRow);\n    }\n\n    // Toggle expanded state\n    toggleExpand(requestId: string) {\n        // Reset all other expanded states\n        Object.keys(this.expandedItems).forEach(key => {\n            if (key !== requestId) {\n                this.expandedItems[key] = false;\n            }\n        });\n        \n        // Toggle current request's expanded state\n        this.expandedItems[requestId] = !this.expandedItems[requestId];\n    }\n\n    // Check if request has more items\n    hasMoreItems(request: any): boolean {\n        return request.items && request.items.length > this.itemsPerRow;\n    }\n\n    // Get the text for see more/less button\n    getToggleText(request: any): string {\n        if (!this.hasMoreItems(request)) return '';\n        \n        const remaining = this.getRemainingCount(request);\n        return this.expandedItems[request.id] \n            ? 'See Less' \n            : `See ${remaining} more`;\n    }\n\n    changeStatus(id: string, newStatus: string) {\n        const request = this.requests.find(x => x.id === id);\n        if (!request) return;\n\n        request.isUpdating = true;\n        this.requestService.changeStatus(id, newStatus, `Status changed to ${newStatus} by admin`)\n            .pipe(first())\n            .subscribe({\n                next: () => {\n                    request.status = newStatus;\n                    // Update workflow status if it exists\n                    if (request.workflows?.length > 0) {\n                        request.workflows[0].status = newStatus;\n                    }\n                    request.isUpdating = false;\n                    this.alertService.success('Status updated successfully');\n                },\n                error: error => {\n                    this.alertService.error(error);\n                    request.isUpdating = false;\n                }\n            });\n    }\n\n    openDeleteModal(request: any) {\n        this.selectedRequest = request;\n        this.deleteModal.show();\n    }\n\n    confirmDelete() {\n        if (!this.selectedRequest) return;\n        \n        this.isDeleting = true;\n        this.requestService.delete(this.selectedRequest.id)\n            .pipe(first())\n            .subscribe({\n                next: () => {\n                    this.deleteModal.hide();\n                    this.alertService.success('Request deleted successfully', { keepAfterRouteChange: true });\n                    this.requests = this.requests.filter(x => x.id !== this.selectedRequest.id);\n                    this.isDeleting = false;\n                    this.selectedRequest = null;\n                },\n                error: error => {\n                    this.alertService.error(error);\n                    this.isDeleting = false;\n                }\n            });\n    }\n} ","<div class=\"card\">\n    <div class=\"card-header\">\n        <div class=\"d-flex justify-content-between align-items-center\">\n            <h2 class=\"mb-0\">\n                <ng-container *ngIf=\"!employeeId\">All Requests</ng-container>\n                <ng-container *ngIf=\"employeeId\">Employee Requests</ng-container>\n            </h2>\n            <div *ngIf=\"employeeId\">\n                <a routerLink=\"/requests\" class=\"btn btn-secondary\">View All Requests</a>\n            </div>\n        </div>\n    </div>\n    <div class=\"card-body\">\n        <div *ngIf=\"loading\" class=\"text-center\">\n            <span class=\"spinner-border spinner-border-lg align-center\"></span>\n        </div>\n        <div *ngIf=\"!loading && notFound\" class=\"alert alert-warning\">\n            No requests found for Employee #{{employeeId}}\n        </div>\n        <table *ngIf=\"!loading && !notFound && requests.length > 0\" class=\"table table-striped\">\n            <thead>\n                <tr>\n                    <th class=\"text-center\" style=\"width: 12%\">Request #</th>\n                    <th class=\"text-center\" style=\"width: 10%\">Type</th>\n                    <th class=\"text-center\" style=\"width: 20%\">Items</th>\n                    <th class=\"text-center\" style=\"width: 10%\">Status</th>\n                    <th class=\"text-center\" style=\"width: 18%\">Created</th>\n                    <th class=\"text-center\" style=\"width: 15%\">Actions</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr *ngFor=\"let request of requests\">\n                    <td class=\"text-center align-middle\">{{request.id}}</td>\n                    <td class=\"text-center align-middle\">{{request.type}}</td>\n                    <td class=\"text-center align-middle\">\n                        <ng-container *ngIf=\"request.type !== 'Leave'\">\n                            <div *ngIf=\"!request.items?.length\" class=\"text-muted\">\n                                No items\n                            </div>\n                            <div *ngIf=\"request.items?.length\" [title]=\"getItemsTooltip(request)\">\n                                <ng-container *ngIf=\"!isExpanded(request.id)\">\n                                    <div class=\"d-flex align-items-center\">\n                                        <span class=\"text-truncate\">{{getVisibleItems(request).slice(0, itemsPerRow).join(', ')}}</span>\n                                        <button *ngIf=\"hasMoreItems(request)\" \n                                                (click)=\"toggleExpand(request.id)\" \n                                                class=\"btn btn-link btn-sm p-0 ms-1\">\n                                            {{getToggleText(request)}}\n                                        </button>\n                                    </div>\n                                </ng-container>\n                                <ng-container *ngIf=\"isExpanded(request.id)\">\n                                    <div class=\"items-list\">\n                                        <div *ngFor=\"let item of getVisibleItems(request)\" class=\"item-line\">\n                                            {{item}}\n                                        </div>\n                                        <button (click)=\"toggleExpand(request.id)\" \n                                                class=\"btn btn-link btn-sm p-0\">\n                                            {{getToggleText(request)}}\n                                        </button>\n                                    </div>\n                                </ng-container>\n                                <small class=\"text-muted d-block\">\n                                    {{request.items?.length === 0 ? 'No items' : \n                                      request.items?.length === 1 ? '1 Item' : \n                                      request.items?.length + ' Items'}}\n                                </small>\n                            </div>\n                        </ng-container>\n                        <span *ngIf=\"request.type === 'Leave'\" class=\"text-muted\">N/A</span>\n                    </td>\n                    <td class=\"text-center align-middle\">\n                        <span class=\"badge\" [ngClass]=\"{\n                            'bg-secondary': request.status === 'Pending',\n                            'bg-success': request.status === 'Approved',\n                            'bg-danger': request.status === 'Rejected'\n                        }\">{{request.status}}</span>\n                    </td>\n                    <td class=\"text-center align-middle\">{{request.createdDate | date:'medium'}}</td>\n                    <td class=\"text-center align-middle\" style=\"white-space: nowrap\">\n                        <a routerLink=\"view/{{request.id}}\" class=\"btn btn-sm btn-primary me-1\">View</a>\n                        <!-- Edit, Delete, and Status Change buttons only for admin -->\n                        <ng-container *ngIf=\"isAdmin\">\n                            <a routerLink=\"edit/{{request.id}}\" class=\"btn btn-sm btn-warning me-1\">Edit</a>\n                            <div class=\"btn-group me-1\">\n                                <button type=\"button\" class=\"btn btn-sm btn-info dropdown-toggle\" data-bs-toggle=\"dropdown\" [disabled]=\"request.isUpdating\">\n                                    <span *ngIf=\"request.isUpdating\" class=\"spinner-border spinner-border-sm me-1\"></span>\n                                    Status\n                                </button>\n                                <ul class=\"dropdown-menu\">\n                                    <li><a class=\"dropdown-item\" (click)=\"changeStatus(request.id, 'Pending')\" [class.disabled]=\"request.status === 'Pending'\">Pending</a></li>\n                                    <li><a class=\"dropdown-item\" (click)=\"changeStatus(request.id, 'Approved')\" [class.disabled]=\"request.status === 'Approved'\">Approved</a></li>\n                                    <li><a class=\"dropdown-item\" (click)=\"changeStatus(request.id, 'Rejected')\" [class.disabled]=\"request.status === 'Rejected'\">Rejected</a></li>\n                                </ul>\n                            </div>\n                            <button (click)=\"openDeleteModal(request)\" class=\"btn btn-sm btn-danger\" [disabled]=\"request.isDeleting\">\n                                <span *ngIf=\"request.isDeleting\" class=\"spinner-border spinner-border-sm me-1\"></span>\n                                <span *ngIf=\"!request.isDeleting\">Delete</span>\n                            </button>\n                        </ng-container>\n                    </td>\n                </tr>\n                <tr *ngIf=\"!loading && !notFound && requests?.length === 0\">\n                    <td colspan=\"7\" class=\"text-center\">\n                        <span class=\"text-muted\">No requests found</span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n\n<!-- Delete Confirmation Modal -->\n<div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\" aria-labelledby=\"deleteModalLabel\" aria-hidden=\"true\">\n    <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header bg-danger text-white\">\n                <h5 class=\"modal-title\" id=\"deleteModalLabel\">Confirm Delete</h5>\n                <button type=\"button\" class=\"btn-close btn-close-white\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n            </div>\n            <div class=\"modal-body\">\n                <p>Are you sure you want to delete request <strong>#{{selectedRequest?.requestNumber}}</strong>?</p>\n                <p class=\"mb-0 text-danger\">This action cannot be undone.</p>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                <button type=\"button\" class=\"btn btn-danger\" (click)=\"confirmDelete()\" [disabled]=\"isDeleting\">\n                    <span *ngIf=\"isDeleting\" class=\"spinner-border spinner-border-sm me-1\"></span>\n                    Delete Request\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n\n<style>\n    .btn-link.btn-sm {\n        text-decoration: none;\n        color: #0d6efd;\n        font-size: 0.875rem;\n        font-weight: 500;\n    }\n    .btn-link.btn-sm:hover {\n        text-decoration: underline;\n    }\n    .text-truncate {\n        max-width: 100%;\n        display: inline-block;\n    }\n    td .d-flex {\n        gap: 0.25rem;\n    }\n    .items-list {\n        margin-bottom: 0.25rem;\n    }\n    .item-line {\n        line-height: 1.4;\n    }\n    .item-line:not(:last-child) {\n        margin-bottom: 0.125rem;\n    }\n</style> "]},"metadata":{},"sourceType":"module","externalDependencies":[]}